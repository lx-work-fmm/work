import sys
sys.path.insert(0, r'E:\codespaces\projects')
from lib.csv import write_csv, read_csv


def filter_and_merge(file1: str, file2: str, range1: tuple, range2: tuple):
    """
    输入：两个csv路径（一个低频天线，一个高频天线）内含增益或效率曲线，每个csv要取的频率范围
    输出：一个合并后的csv文件
    备注：按每个csv要去的频率范围进行数据提取和合并
    """
    data1 = read_csv(file1)
    data2 = read_csv(file2)

    res = []
    for v in data1:
        try:
            if range1[0] <= float(v[0]) <= range1[1]:
                res.append(v)
        except:
            pass
    for v in data2:
        try:
            if range2[0] <= float(v[0]) <= range2[1]:
                res.append(v)
        except:
            pass
    
    write_csv('./3/out.csv', res)
    
if __name__ == '__main__':
    import os
    os.chdir(os.path.dirname(__file__))
    filter_and_merge('./3/losVV_A2B_400MHz-out.csv', './3/losVV_A2B_400MHz-out.csv', (405000000,415000000), (420000000,420000000))